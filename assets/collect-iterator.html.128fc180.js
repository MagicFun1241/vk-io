import{_ as e,r as t,o as c,c as o,a as n,b as i,d as s,e as l}from"./app.4383cdfd.js";const p={},r=n("h1",{id:"collect-iterator",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#collect-iterator","aria-hidden":"true"},"#"),s(" Collect Iterator")],-1),d=n("p",null,"\u0425\u0435\u043B\u043F\u0435\u0440 \u043C\u043E\u0434\u0443\u043B\u044C \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u044E\u0449\u0438\u0439 \u0443\u043F\u0440\u043E\u0441\u0442\u0438\u0442\u044C \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445",-1),u=n("h2",{id:"\u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435-\u0442\u0438\u043F\u043E\u0432",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435-\u0442\u0438\u043F\u043E\u0432","aria-hidden":"true"},"#"),s(" \u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0438\u043F\u043E\u0432")],-1),k={href:"https://negezor.github.io/vk-io/references/vk-io/index.html#createCollectIterator",target:"_blank",rel:"noopener noreferrer"},m=s("API Reference [EN]"),v=l(`<h2 id="\u043A\u043E\u043D\u0446\u0435\u043F\u0442" tabindex="-1"><a class="header-anchor" href="#\u043A\u043E\u043D\u0446\u0435\u043F\u0442" aria-hidden="true">#</a> \u041A\u043E\u043D\u0446\u0435\u043F\u0442</h2><p>\u041C\u043D\u043E\u0436\u0435\u0441\u0442\u0432\u043E \u043C\u0435\u0442\u043E\u0434\u043E\u0432 \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u044E\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u0447\u0430\u0441\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0445, \u0438 \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u043E\u0441\u0442\u0430\u043B\u044C\u043D\u043E\u0439 \u0447\u0430\u0441\u0442\u0438 \u2014 \u043D\u0443\u0436\u043D\u043E \u0443\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0441\u043C\u0435\u0449\u0435\u043D\u0438\u0435. \u0414\u043B\u044F \u044D\u0442\u043E\u0433\u043E \u0432 \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0435 \u0435\u0441\u0442\u044C \u0438\u0442\u0435\u0440\u0430\u0442\u043E\u0440 \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0441\u0442\u0430\u0432\u0438\u0442 \u0441\u043C\u0435\u0449\u0435\u043D\u0438\u0435.</p><h2 id="\u043F\u0440\u0438\u043C\u0435\u0440" tabindex="-1"><a class="header-anchor" href="#\u043F\u0440\u0438\u043C\u0435\u0440" aria-hidden="true">#</a> \u041F\u0440\u0438\u043C\u0435\u0440</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">API</span><span class="token punctuation">,</span> createCollectIterator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">API</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	token<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TOKEN</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token function">createCollectIterator</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	api<span class="token punctuation">,</span>
	
	method<span class="token operator">:</span> <span class="token string">&#39;messages.getConversations&#39;</span><span class="token punctuation">,</span>
	params<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u0411\u0443\u0434\u0435\u0442 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u044C profiles \u0438 groups</span>
		extended<span class="token operator">:</span> <span class="token number">1</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 count \u0432 \u043C\u0435\u0442\u043E\u0434\u0435</span>
	countPerRequest<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>

	<span class="token comment">// \u0423\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0439\u0442\u0435 \u043E\u043F\u0446\u0438\u044E \u0434\u043B\u044F \u043C\u0435\u0442\u043E\u0434\u043E\u0432 \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043D\u0435 \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435 N \u0434\u0430\u043D\u043D\u044B\u0445, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440 \`users.search\`</span>
	<span class="token comment">// maxCount: 1000,</span>

	<span class="token comment">// \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u043E\u043F\u044B\u0442\u043E\u043A \u0432\u044B\u0437\u0432\u0430\u0442\u044C \u0441\u043D\u043E\u0432\u0430 \u043F\u0440\u0438 \u043E\u0448\u0438\u0431\u043A\u0435</span>
	<span class="token comment">// retryLimit: 3,</span>

	<span class="token comment">// \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u0430\u0440\u0430\u043B\u0435\u043B\u044C\u043D\u044B\u0445 \u0432\u044B\u0437\u043E\u0432\u043E\u0432 \u0435\u0441\u043B\u0438 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F execute</span>
	<span class="token comment">// parallelRequests: 25</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunk <span class="token keyword">of</span> iterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// chunk.received</span>
	<span class="token comment">// chunk.percent</span>
	<span class="token comment">// chunk.total</span>

	<span class="token comment">// chunk.items</span>
	<span class="token comment">// chunk.profiles</span>
	<span class="token comment">// chunk.groups</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function b(h,_){const a=t("ExternalLinkIcon");return c(),o("div",null,[r,d,u,n("p",null,[n("a",k,[m,i(a)])]),v])}const x=e(p,[["render",b],["__file","collect-iterator.html.vue"]]);export{x as default};
