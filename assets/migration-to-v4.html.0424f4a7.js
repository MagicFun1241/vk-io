import{_ as o,r as c,o as i,c as l,a as n,b as e,d as s,e as t}from"./app.4383cdfd.js";const p={},d=n("h1",{id:"\u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435-\u0434\u043E-v4",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435-\u0434\u043E-v4","aria-hidden":"true"},"#"),s(" \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0434\u043E v4")],-1),r=n("p",null,"VK-IO v4 \u2014 \u044D\u0442\u043E \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u043C\u0430\u0436\u043E\u0440\u043D\u043E\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435. \u041D\u0438\u0436\u0435 \u043F\u0440\u0438\u0432\u0435\u0434\u0451\u043D \u0441\u043F\u0438\u0441\u043E\u043A \u043A\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043F\u043E\u043C\u043E\u0436\u0435\u0442 \u0432\u0430\u043C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C\u0441\u044F.",-1),u=n("h2",{id:"tl-dr",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tl-dr","aria-hidden":"true"},"#"),s(" TL;DR")],-1),k=n("li",null,"\u0411\u044B\u043B\u0438 \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u044B \u0441\u0435\u0440\u044C\u0451\u0437\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432 \u0442\u0438\u043F\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0438",-1),v=s("\u0411\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0430 \u0442\u0435\u043F\u0435\u0440\u044C \u043F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0441\u043B\u0435\u0434\u0443\u0435\u0442 "),m={href:"https://ru.wikipedia.org/wiki/%D0%9D%D0%B5%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%B9_%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82",target:"_blank",rel:"noopener noreferrer"},b=s("immutable"),h=s(" \u043F\u0440\u0438\u043D\u0446\u0438\u043F\u0443."),g=n("li",null,[s("\u041A\u0430\u0436\u0434\u044B\u0439 \u043A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442 \u0442\u0435\u043F\u0435\u0440\u044C \u043D\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043E\u0442 \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0438\u043D\u0441\u0442\u0430\u043D\u0446\u0438\u0438 "),n("code",null,"VK")],-1),x=n("li",null,[s("\u0423\u0431\u0440\u0430\u043D\u044B \u043B\u0438\u0448\u043D\u0438\u0435 \u043A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442\u044B \u0432 \u043F\u043E\u043B\u044C\u0437\u0443 \u043F\u0440\u043E\u0441\u0442\u044B\u0445 \u0444\u0443\u043D\u043A\u0446\u0438\u0439 (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440 "),n("code",null,"resolveResource()"),s(" \u0438\u043B\u0438 "),n("code",null,"createCollectIterator()"),s(")")],-1),_=t('<details class="custom-container details"><summary>\u0415\u0441\u043B\u0438 \u0435\u0449\u0451 \u043A\u043E\u0440\u043E\u0447\u0435</summary><p><img src="https://user-images.githubusercontent.com/9392723/89174354-6d7cd480-d5d1-11ea-8336-9ad40152b812.png" alt="cheems meme"></p></details><h2 id="breaking-\u0441hanges" tabindex="-1"><a class="header-anchor" href="#breaking-\u0441hanges" aria-hidden="true">#</a> Breaking \u0421hanges</h2><h3 id="\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430-node-js-12-\u0438-\u0432\u044B\u0448\u0435" tabindex="-1"><a class="header-anchor" href="#\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430-node-js-12-\u0438-\u0432\u044B\u0448\u0435" aria-hidden="true">#</a> \u041F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430 Node.js 12 \u0438 \u0432\u044B\u0448\u0435</h3><p>\u0411\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0430 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043F\u0435\u0440\u044C \u0442\u043E\u043B\u044C\u043A\u043E Node.js 12 \u0438 \u0432\u044B\u0448\u0435.</p><h3 id="vk" tabindex="-1"><a class="header-anchor" href="#vk" aria-hidden="true">#</a> VK</h3>',5),f=t("<li>\u0423\u0434\u0430\u043B\u0451\u043D \u0433\u0435\u0442\u0442\u0435\u0440/\u0441\u0435\u0442\u0442\u0435\u0440 <code>vk.token</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>vk.setOptions()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0441\u0435\u0442\u0442\u0435\u0440 <code>vk.captchaHandler</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043C\u0435\u0442\u043E\u0434 <code>vk.callbackService.onCaptcha()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0441\u0435\u0442\u0442\u0435\u0440 <code>vk.twoFactorHandler</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043C\u0435\u0442\u043E\u0434 <code>vk.callbackService.onTwoFactor()</code></li>",4),y=s("\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u043E\u0434\u0443\u043B\u044C "),w=n("code",null,"vk.auth",-1),C=s(", \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u043C\u0435\u0441\u0442\u043E \u044D\u0442\u043E\u0433\u043E \u043F\u0430\u043A\u0435\u0442 "),I={href:"https://github.com/negezor/vk-io/tree/master/packages/authorization",target:"_blank",rel:"noopener noreferrer"},A=s("@vk-io/authorization"),R=s("\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u043E\u0434\u0443\u043B\u044C "),P=n("code",null,"vk.streaming",-1),D=s(", \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u043C\u0435\u0441\u0442\u043E \u044D\u0442\u043E\u0433\u043E \u043F\u0430\u043A\u0435\u0442 "),S={href:"https://github.com/negezor/vk-io/tree/master/packages/streaming",target:"_blank",rel:"noopener noreferrer"},T=s("@vk-io/streaming"),M=n("li",null,"\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u043D\u044B\u0439",-1),E=t(`<div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import VK from &#39;vk-io&#39;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import { VK } from &#39;vk-io&#39;;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u0423\u0434\u0430\u043B\u0451\u043D <code>vk.snippets.resolveResource()</code>, \u0432\u043C\u0435\u0441\u0442\u043E \u043C\u043E\u0434\u0443\u043B\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u044F <code>resolveResource()</code> \u041F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u043E\u043F\u0446\u0438\u0438 \u0432\u0438\u0434\u0430:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IResolveResourceOptions</span> <span class="token punctuation">{</span>
	resource<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	api<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> resolveResource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">resolveResource</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// \u041E\u0431\u044A\u0435\u043A\u0442 API</span>
	api<span class="token punctuation">,</span>

	resource<span class="token operator">:</span> <span class="token string">&#39;https://vk.com/durov&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u0423\u0434\u0430\u043B\u0451\u043D <code>vk.collect</code>, \u043C\u043E\u0434\u0443\u043B\u044C \u0440\u0430\u0437\u0431\u0438\u0442 \u043D\u0430 \u043C\u0435\u043B\u043A\u0438\u0435 \u043A\u043B\u0430\u0441\u0441\u044B \u0438 \u0444\u0443\u043D\u043A\u0446\u0438\u0438</li><li><ul><li><strong>collect.chain()</strong> - \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043A\u043B\u0430\u0441\u0441 <code>new Chain()</code></li></ul></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Chain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> chain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// \u041E\u0431\u044A\u0435\u043A\u0442 API</span>
	api
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><ul><li><strong>collect.executes()</strong> - \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u044E <code>executes()</code> \u041F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u043E\u043F\u0446\u0438\u0438 \u0432\u0438\u0434\u0430:</li></ul></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IExecutesOptions</span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	<span class="token comment">// eslint-disable-next-line @typescript-eslint/no-explicit-any</span>
	queue<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> executes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">executes</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// \u041E\u0431\u044A\u0435\u043A\u0442 API</span>
	api<span class="token punctuation">,</span>
	
	method<span class="token operator">:</span> <span class="token string">&#39;users.get&#39;</span><span class="token punctuation">,</span>
	queue<span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span> user_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> user_id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> user_id<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// ...</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><ul><li><strong>collect.<em>.</em>()</strong> - \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u044E <code>createCollectIterator()</code> \u041F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u043E\u043F\u0446\u0438\u0438 \u0432\u0438\u0434\u0430:</li></ul></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ICollectIteratorOptions</span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
		count<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
		offset<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	maxCount<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	countPerRequest<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

	retryLimit<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	parallelRequests<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createCollectIterator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token function">createCollectIterator</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// \u041E\u0431\u044A\u0435\u043A\u0442 API</span>
	api<span class="token punctuation">,</span>

	method<span class="token operator">:</span> <span class="token string">&#39;messages.getConversations&#39;</span><span class="token punctuation">,</span>
	params<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u0411\u0443\u0434\u0435\u0442 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u044C profiles \u0438 groups</span>
		extended<span class="token operator">:</span> <span class="token number">1</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 count \u0432 \u043C\u0435\u0442\u043E\u0434\u0435</span>
	countPerRequest<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>

	<span class="token comment">// \u0423\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0439\u0442\u0435 \u043E\u043F\u0446\u0438\u044E \u0434\u043B\u044F \u043C\u0435\u0442\u043E\u0434\u043E\u0432 \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043D\u0435 \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435 N \u0434\u0430\u043D\u043D\u044B\u0445, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440 \`users.search\`</span>
	<span class="token comment">// maxCount: 1000,</span>

	<span class="token comment">// \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u043E\u043F\u044B\u0442\u043E\u043A \u0432\u044B\u0437\u0432\u0430\u0442\u044C \u0441\u043D\u043E\u0432\u0430 \u043F\u0440\u0438 \u043E\u0448\u0438\u0431\u043A\u0435</span>
	<span class="token comment">// retryLimit: 3,</span>

	<span class="token comment">// \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u0430\u0440\u0430\u043B\u0435\u043B\u044C\u043D\u044B\u0445 \u0432\u044B\u0437\u043E\u0432\u043E\u0432 \u0435\u0441\u043B\u0438 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F execute</span>
	<span class="token comment">// parallelRequests: 25</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunk <span class="token keyword">of</span> iterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// chunk.received</span>
	<span class="token comment">// chunk.percent</span>
	<span class="token comment">// chunk.total</span>

	<span class="token comment">// chunk.items</span>
	<span class="token comment">// chunk.profiles</span>
	<span class="token comment">// chunk.groups</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h3>`,16),O=n("li",null,[s("\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043E\u043F\u0446\u0438\u0438 "),n("strong",null,"apiAttempts"),s(" \u0432 "),n("strong",null,"apiRetryLimit")],-1),L=n("li",null,[s("\u0423\u0434\u0430\u043B\u0451\u043D \u0433\u0435\u0442\u0442\u0435\u0440 "),n("code",null,"vk.api.API_VERSION")],-1),B=s("Enum "),U=n("code",null,"APIErrorCode",-1),F=s(" \u0442\u0435\u043F\u0435\u0440\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0433\u0435\u043D\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F \u0438\u0437 "),q={href:"https://github.com/VKCOM/vk-api-schema",target:"_blank",rel:"noopener noreferrer"},V=s("\u0441\u0445\u0435\u043C\u044B"),N=t("<li>\u041E\u0431\u044A\u043A\u0442\u044B \u0441\u0445\u0435\u043C\u044B \u0442\u0435\u043F\u0435\u0440\u044C \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u0443\u044E\u0442\u0441\u044F \u0432 \u0441\u0432\u043E\u0438\u0445 namespace <code>Params</code>, <code>Objects</code> \u0438 <code>Responses</code></li><li>\u0423\u0434\u0430\u043B\u0435\u043D\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u0432\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u044F \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>@vk-io/authorization</code> \u043A\u043B\u0430\u0441\u0441 <code>AccountVerification</code></li><li>\u0423\u0434\u0430\u043B\u0435\u043D\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 <code>random_id</code> \u0432 <code>api.messages.send()</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u043C\u0435\u0441\u0442\u043E \u044D\u0442\u043E\u0433\u043E \u0444\u0443\u043D\u043A\u0446\u0438\u044E <code>getRandomId()</code></li>",3),j=t(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getRandomId <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	peer_id<span class="token operator">:</span> <span class="token number">1234</span><span class="token punctuation">,</span>
	random_id<span class="token operator">:</span> <span class="token function">getRandomId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

	text<span class="token operator">:</span> <span class="token string">&#39;Hello!&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="apirequest" tabindex="-1"><a class="header-anchor" href="#apirequest" aria-hidden="true">#</a> APIRequest</h3><ul><li>\u041A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440 \u0442\u0435\u043F\u0435\u0440\u044C \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u043E\u043F\u0446\u0438\u0438 \u0432\u0438\u0434\u0430:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IAPIRequestOptions</span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0430\u043B\u0438\u0430\u0441 <code>Request</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>APIRequest</code></li></ul><h3 id="attachment-externalattachment" tabindex="-1"><a class="header-anchor" href="#attachment-externalattachment" aria-hidden="true">#</a> Attachment &amp; ExternalAttachment</h3><ul><li>\u041A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440 \u0442\u0435\u043F\u0435\u0440\u044C \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u043E\u043F\u0446\u0438\u0438 \u0432\u0438\u0434\u0430:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ISharedAttachmentPayload</span> <span class="token punctuation">{</span>
	id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	owner_id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	access_key<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IAttachmentOptions<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> Type <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	type<span class="token operator">:</span> Type<span class="token punctuation">;</span>
	payload<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>ISharedAttachmentPayload<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token constant">P</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="documentattachment" tabindex="-1"><a class="header-anchor" href="#documentattachment" aria-hidden="true">#</a> DocumentAttachment</h3><ul><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>document.typeName</code></li></ul><h3 id="context" tabindex="-1"><a class="header-anchor" href="#context" aria-hidden="true">#</a> Context</h3><ul><li>\u041A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440 \u0442\u0435\u043F\u0435\u0440\u044C \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u043E\u043F\u0446\u0438\u0438 \u0432\u0438\u0434\u0430:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IContextOptions<span class="token operator">&lt;</span>
	<span class="token constant">P</span><span class="token punctuation">,</span>
	<span class="token constant">S</span><span class="token punctuation">,</span>
	Type <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
	SubType <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>
	upload<span class="token operator">:</span> Upload<span class="token punctuation">;</span>

	type<span class="token operator">:</span> Type<span class="token punctuation">;</span>
	subTypes<span class="token operator">:</span> SubType<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	payload<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">;</span>
	state<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">;</span>

	source<span class="token operator">:</span> UpdateSource<span class="token punctuation">;</span>
	updateType<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

	groupId<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u041C\u0435\u0442\u043E\u0434 <code>context.is()</code> \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u0442\u0435\u043F\u0435\u0440\u044C \u043C\u0430\u0441\u0441\u0438\u0432 \u0442\u0438\u043F\u043E\u0432</li></ul><h3 id="messagecontext" tabindex="-1"><a class="header-anchor" href="#messagecontext" aria-hidden="true">#</a> MessageContext</h3><ul><li>\u041C\u0435\u0442\u043E\u0434 <code>context.send()</code> \u0442\u0435\u043F\u0435\u0440\u044C \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0438\u043D\u0441\u0442\u0430\u043D\u0446\u0438\u044E <code>MessageContext</code></li><li>\u0413\u0435\u0442\u0442\u0435\u0440 <code>context.replyMessage</code> \u0442\u0435\u043F\u0435\u0440\u044C \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 <code>MessageContext</code> \u0432\u043C\u0435\u0441\u0442\u043E <code>MessageReply</code></li><li>\u0413\u0435\u0442\u0442\u0435\u0440 <code>context.forwards</code> \u0442\u0435\u043F\u0435\u0440\u044C \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043C\u0430\u0441\u0441\u0438\u0432 <code>MessageContext</code> \u0432\u043C\u0435\u0441\u0442\u043E <code>MessageForward</code></li><li>\u0418\u0437\u043C\u0435\u043D\u0438\u043B\u0438\u0441\u044C \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0434\u043B\u044F \u043C\u0435\u0442\u043E\u0434\u043E\u0432 <code>context.sendPhotos()</code>, <code>context.sendDocuments()</code>, <code>context.sendAudioMessage()</code> \u0438 <code>context.sendAudioMessage()</code>. \u0422\u0435\u043F\u0435\u0440\u044C \u043E\u043D\u0438 \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u044E\u0442 \u043E\u0431\u044A\u0435\u043A\u0442.</li></ul><p>\u0411\u044B\u043B\u043E:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>context<span class="token punctuation">.</span><span class="token function">sendPhotos</span><span class="token punctuation">(</span><span class="token string">&#39;./cat.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u0421\u0442\u0430\u043B\u043E:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>context<span class="token punctuation">.</span><span class="token function">sendPhotos</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	value<span class="token operator">:</span> <span class="token string">&#39;./cat.png&#39;</span><span class="token punctuation">,</span>
	<span class="token comment">// filename: &#39;cat.png&#39;,</span>
	<span class="token comment">// contentType: &#39;image/png&#39;,</span>
	<span class="token comment">// contentLength: ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u0418\u043B\u0438</span>

context<span class="token punctuation">.</span><span class="token function">sendPhotos</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	values<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
		value<span class="token operator">:</span> <span class="token string">&#39;./cat.png&#39;</span>
		<span class="token comment">// filename: &#39;cat.png&#39;,</span>
		<span class="token comment">// contentType: &#39;image/png&#39;</span>
		<span class="token comment">// contentLength: ...</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token comment">// timeout: 30_000,</span>
	<span class="token comment">// uploadUrl: &#39;...&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.getInviteLink()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.markAsImportant()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.renameChat()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.newChatPhoto()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.deleteChatPhoto()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.inviteUser()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.kickUser()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.pinMessage()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.unpinMessage()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.editMessageText()</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>context.sendSticker()</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>context.send({ sticker_id: 123 })</code></li></ul><h3 id="commentactioncontext" tabindex="-1"><a class="header-anchor" href="#commentactioncontext" aria-hidden="true">#</a> CommentActionContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0432 <code>CommentContext</code></li></ul><h3 id="commentcontext" tabindex="-1"><a class="header-anchor" href="#commentcontext" aria-hidden="true">#</a> CommentContext</h3><ul><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.userId</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>context.fromId</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.removerUserId</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>context.deleterUserId</code></li></ul><h3 id="messageflagscontext" tabindex="-1"><a class="header-anchor" href="#messageflagscontext" aria-hidden="true">#</a> MessageFlagsContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>message_flags_update</code> \u0432 <code>message_flags_replace</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>message_flags_set</code> \u0432 <code>message_flags_add</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isChat</code> \u0432 <code>context.isFromWebChat</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isFriends</code> \u0432 <code>context.isFriendMessage</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isSpam</code> \u0432 <code>context.isMarkSpam</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isSpam</code> \u0432 <code>context.isUnmarkSpam</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isFixed</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isMedia</code></li></ul><h3 id="dialogflagscontext" tabindex="-1"><a class="header-anchor" href="#dialogflagscontext" aria-hidden="true">#</a> DialogFlagsContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>dialog_flags_update</code> \u0432 <code>dialog_flags_replace</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>dialog_flags_set</code> \u0432 <code>dialog_flags_add</code></li></ul><h3 id="removedmessagescontext" tabindex="-1"><a class="header-anchor" href="#removedmessagescontext" aria-hidden="true">#</a> RemovedMessagesContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0432 <code>DialogMessagesContext</code></li></ul><h3 id="dialogmessagescontext" tabindex="-1"><a class="header-anchor" href="#dialogmessagescontext" aria-hidden="true">#</a> DialogMessagesContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>messages_delete</code> \u0432 <code>dialog_messages_delete</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>messages_restore</code> \u0432 <code>dialog_messages_restore</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.id</code> \u0432 <code>context.localId</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isRemoved</code> \u0432 <code>context.isDelete</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isRecovery</code> \u0432 <code>context.isRestore</code></li></ul><h3 id="useronlinecontext" tabindex="-1"><a class="header-anchor" href="#useronlinecontext" aria-hidden="true">#</a> UserOnlineContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0432 <code>FriendActivityContext</code></li></ul><h3 id="friendactivitycontext" tabindex="-1"><a class="header-anchor" href="#friendactivitycontext" aria-hidden="true">#</a> FriendActivityContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>user_online</code> \u0432 <code>friend_online</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>user_offline</code> \u0432 <code>friend_offline</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isUserOnline</code> \u0432 <code>context.isOnline</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isUserOffline</code> \u0432 <code>context.isOffline</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isSelfExit</code> \u0432 <code>context.isSelfLeave</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.isTimeoutExit</code> \u0432 <code>context.isTimeoutLeave</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.createdAt</code> \u0432 <code>context.eventAt</code></li><li>\u0413\u0435\u0442\u0442\u0435\u0440 <code>context.platform</code> \u0442\u0435\u043F\u0435\u0440\u044C \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 ID \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u044B</li></ul><h3 id="readmessagescontext" tabindex="-1"><a class="header-anchor" href="#readmessagescontext" aria-hidden="true">#</a> ReadMessagesContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0432 <code>MessagesReadContext</code></li></ul><h3 id="messagesreadcontext" tabindex="-1"><a class="header-anchor" href="#messagesreadcontext" aria-hidden="true">#</a> MessagesReadContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>messages_inbox_read</code> \u0432 <code>messages_read_inbox</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u043F\u043E\u0434\u0442\u0438\u043F <code>messages_outbox_read</code> \u0432 <code>messages_read_outbox</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0433\u0435\u0442\u0442\u0435\u0440 <code>context.id</code> \u0432 <code>context.localId</code></li></ul><h3 id="messageallowcontext" tabindex="-1"><a class="header-anchor" href="#messageallowcontext" aria-hidden="true">#</a> MessageAllowContext</h3><ul><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0432 <code>MessageSubscriptionContext</code></li></ul><h3 id="messagesubscriptioncontext" tabindex="-1"><a class="header-anchor" href="#messagesubscriptioncontext" aria-hidden="true">#</a> MessageSubscriptionContext</h3><ul><li>\u0422\u0438\u043F <code>message_subscribers</code> \u043F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D \u0432 <code>message_subscription</code></li></ul><h3 id="keyboard" tabindex="-1"><a class="header-anchor" href="#keyboard" aria-hidden="true">#</a> Keyboard</h3><ul><li>\u0423\u0434\u0430\u043B\u0435\u043D\u0430 \u043A\u043E\u043D\u0441\u0442\u0430\u043D\u0442\u0430 <code>Keyboard.DEFAULT_COLOR</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>Keyboard.SECONDARY_COLOR</code></li></ul><h3 id="updates" tabindex="-1"><a class="header-anchor" href="#updates" aria-hidden="true">#</a> Updates</h3><ul><li>\u0412\u0441\u0435 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u044B \u0442\u0435\u043F\u0435\u0440\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044E\u0442 <code>undefined</code> \u0432\u043C\u0435\u0441\u0442\u043E <code>null</code> \u0434\u043B\u044F \u0443\u0434\u043E\u0431\u043D\u043E\u0439 \u0434\u0435\u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message_new&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> text <span class="token operator">=</span> <span class="token string">&#39;default text&#39;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>text <span class="token operator">===</span> <span class="token string">&#39;default text&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;\u0412\u044B \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u043F\u0438\u0441\u0430\u043B\u0438&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">await</span> context<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,50),H=s("\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 "),K=n("code",null,"updates.hear()",-1),z=s(" \u0438 "),W=n("code",null,"updates.setHearFallbackHandler()",-1),G=s(", \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u043C\u0435\u0441\u0442\u043E \u044D\u0442\u043E\u0433\u043E \u043F\u0430\u043A\u0435\u0442 "),Y={href:"https://github.com/negezor/vk-io/tree/master/packages/hear",target:"_blank",rel:"noopener noreferrer"},J=s("@vk-io/hear"),Q=s("\u0422\u0435\u043F\u0435\u0440\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044E\u0442\u0441\u044F "),X={href:"https://vk.com/dev/groups_events",target:"_blank",rel:"noopener noreferrer"},Z=s("\u043E\u0444\u0438\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0435 \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439"),$=s(" \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440"),nn=t(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message_new&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">await</span> context<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u0423\u0434\u0430\u043B\u0435\u043D \u0432\u0442\u043E\u0440\u043E\u0439 \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442 \u0443 <code>updates.startWebhook()</code>, \u0432\u043C\u0435\u0441\u0442\u043E \u044D\u0442\u043E\u0433\u043E \u043F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u044E \u0432 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u043E <code>next</code></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">startWebhook</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// ...</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u0412\u0435\u0440\u0441\u0438\u044F polling&#39;\u0430 \u0431\u044B\u043B\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430 \u0434\u043E <code>10</code></li><li>\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043E\u043F\u0446\u0438\u0438 <strong>pollingAttempts</strong> \u0432 <strong>pollingRetryLimit</strong></li></ul><h3 id="upload" tabindex="-1"><a class="header-anchor" href="#upload" aria-hidden="true">#</a> Upload</h3><ul><li>\u041C\u0435\u0442\u043E\u0434\u044B <code>upload.storiesPhoto()</code> \u0438 <code>upload.storiesVideo()</code> \u0442\u0435\u043F\u0435\u0440\u044C \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u044E\u0442 <code>StoryAttachment</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u043C\u0435\u0442\u043E\u0434 <code>upload.graffiti()</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u043C\u0435\u0441\u0442\u043E \u043D\u0435\u0433\u043E <code>upload.documentGraffiti()</code> \u0438\u043B\u0438 <code>upload.messageGraffiti()</code></li><li>\u0418\u0437\u043C\u0435\u043D\u0438\u043B\u0441\u044F \u0444\u043E\u0440\u043C\u0430\u0442 <code>source</code>, \u0442\u0435\u043F\u0435\u0440\u044C \u043E\u043D \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u0432\u0430 \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>upload<span class="token punctuation">.</span><span class="token function">messagePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	source<span class="token operator">:</span> <span class="token punctuation">{</span>
		value<span class="token operator">:</span> <span class="token string">&#39;https://picsum.photos/200/300/?image=1&#39;</span><span class="token punctuation">,</span>

		<span class="token comment">// filename: &#39;image.jpeg&#39;,</span>
		<span class="token comment">// contentType: &#39;image/jpeg&#39;</span>

		<span class="token comment">// contentLength?: number;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u0418\u043B\u0438</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>upload<span class="token punctuation">.</span><span class="token function">messagePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	source<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// uploadUrl?: string;</span>
		<span class="token comment">// timeout?: number;</span>
		
		<span class="token comment">// \u0421\u0432\u043E\u0439\u0441\u0442\u0432\u043E values \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043C\u0430\u0441\u0441\u0438\u0432\u043E\u043C \u0435\u0441\u043B\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0432 \u0430\u043B\u044C\u0431\u043E\u043C</span>
		values<span class="token operator">:</span> <span class="token punctuation">{</span>
			value<span class="token operator">:</span> <span class="token string">&#39;https://picsum.photos/200/300/?image=1&#39;</span><span class="token punctuation">,</span>

			<span class="token comment">// filename: &#39;image.jpeg&#39;,</span>
			<span class="token comment">// contentType: &#39;image/jpeg</span>

			<span class="token comment">// contentLength?: number;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u0423 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 \u0432 <code>source</code> \u043F\u043E\u044F\u0432\u0438\u043B\u043E\u0441\u044C \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u043E <code>contentLength</code>, \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u0440\u0430\u0437\u043C\u0435\u0440 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430</li></ul><blockquote><p>\u0415\u0441\u043B\u0438 \u0432\u044B \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0435 \u043F\u043E\u0442\u043E\u043A, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043D\u0435 \u043F\u0440\u0435\u0434\u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438 \u043E \u0440\u0430\u0437\u043C\u0435\u0440\u0435 \u0432 \u0431\u0430\u0439\u0442\u0430\u0445, \u0432\u0430\u043C \u0441\u043B\u0435\u0434\u0443\u0435\u0442 \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u043E <code>contentLength</code>, \u0442\u0430\u043A \u043A\u0430\u043A \u0438\u043D\u0430\u0447\u0435 \u0444\u0430\u0439\u043B \u043D\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D. \u042D\u0442\u043E \u043E\u0441\u043E\u0431\u0435\u043D\u043D\u043E \u0430\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u043C\u0435\u0442\u043E\u0434\u0430 <code>upload.video()</code></p></blockquote><h3 id="callback-service" tabindex="-1"><a class="header-anchor" href="#callback-service" aria-hidden="true">#</a> Callback Service</h3><ul><li>\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043C\u0435\u0442\u043E\u0434 <code>callbackService.onCaptcha()</code> \u0432\u043C\u0435\u0441\u0442\u043E \u0441\u0435\u0442\u0442\u0435\u0440\u0430 <code>callbackService.captchaHandler</code></li><li>\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043C\u0435\u0442\u043E\u0434 <code>callbackService.onTwoFactor()</code> \u0432\u043C\u0435\u0441\u0442\u043E \u0441\u0435\u0442\u0442\u0435\u0440\u0430 <code>callbackService.twoFactorHandler</code></li></ul><h3 id="\u0443\u0434\u0430\u043B\u0435\u043D\u043D\u044B\u0435-\u044D\u043A\u0441\u043F\u043E\u0440\u0442\u044B" tabindex="-1"><a class="header-anchor" href="#\u0443\u0434\u0430\u043B\u0435\u043D\u043D\u044B\u0435-\u044D\u043A\u0441\u043F\u043E\u0440\u0442\u044B" aria-hidden="true">#</a> \u0423\u0434\u0430\u043B\u0451\u043D\u043D\u044B\u0435 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u044B</h3><ul><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>attachmentTypes</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>AttachmentType</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>defaultExtensions</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>DefaultExtension</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>defaultContentTypes</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>DefaultContentType</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>captchaTypes</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>CaptchaType</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>messageSources</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>MessageSource</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>resourceTypes</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>ResourceType</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>updatesSources</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>UpdateSource</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>apiErrors</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>APIErrorCode</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>uploadErrors</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>UploadErrorCode</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>updatesErrors</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>UpdatesErrorCode</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>snippetsErrors</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>ResourceErrorCode</code></li><li>\u0423\u0434\u0430\u043B\u0451\u043D \u044D\u043A\u0441\u043F\u043E\u0440\u0442 <code>sharedErrors</code>, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 <code>SharedErrorCode</code></li></ul>`,15);function sn(an,en){const a=c("ExternalLinkIcon");return i(),l("div",null,[d,r,u,n("ul",null,[k,n("li",null,[v,n("a",m,[b,e(a)]),h]),g,x]),_,n("ul",null,[f,n("li",null,[y,w,C,n("a",I,[A,e(a)])]),n("li",null,[R,P,D,n("a",S,[T,e(a)])]),M]),E,n("ul",null,[O,L,n("li",null,[B,U,F,n("a",q,[V,e(a)])]),N]),j,n("ul",null,[n("li",null,[H,K,z,W,G,n("a",Y,[J,e(a)])]),n("li",null,[Q,n("a",X,[Z,e(a)]),$])]),nn])}const on=o(p,[["render",sn],["__file","migration-to-v4.html.vue"]]);export{on as default};
