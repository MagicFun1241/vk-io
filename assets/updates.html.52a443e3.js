import{_ as c,r as o,o as i,c as l,a as n,b as a,w as u,d as s,e}from"./app.4383cdfd.js";const r={},d=n("h1",{id:"updates",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#updates","aria-hidden":"true"},"#"),s(" Updates")],-1),k=s("\u0411\u0430\u0437\u043E\u0432\u044B\u0439 \u043C\u043E\u0434\u0443\u043B\u044C \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0438\u0437 "),h={href:"https://vk.com/dev/using_longpoll",target:"_blank",rel:"noopener noreferrer"},v=s("User Long Poll"),m=s(", "),b={href:"https://vk.com/dev/bots_longpoll",target:"_blank",rel:"noopener noreferrer"},_=s("Bots Long Poll"),g=s(" \u0438 "),f={href:"https://vk.com/dev/callback_api",target:"_blank",rel:"noopener noreferrer"},x=s("Callback API"),w=s("."),y=n("h2",{id:"\u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435-\u0442\u0438\u043F\u043E\u0432",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435-\u0442\u0438\u043F\u043E\u0432","aria-hidden":"true"},"#"),s(" \u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0438\u043F\u043E\u0432")],-1),P={href:"https://negezor.github.io/vk-io/references/vk-io/classes/Updates.html",target:"_blank",rel:"noopener noreferrer"},U=s("API Reference [EN]"),I=n("h2",{id:"\u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F","aria-hidden":"true"},"#"),s(" \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F")],-1),q={href:"https://negezor.github.io/vk-io/references/vk-io/interfaces/IUpdatesOptions.html",target:"_blank",rel:"noopener noreferrer"},z=s("\u041E\u043F\u0446\u0438\u0438 \u043A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0442\u043E\u0440\u0430"),L=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">API</span><span class="token punctuation">,</span> Upload<span class="token punctuation">,</span> Updates <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">API</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	token<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TOKEN</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> upload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Upload</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	api
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> updates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Updates</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	api<span class="token punctuation">,</span>

	upload
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u043A\u043E\u043D\u0446\u0435\u043F\u0442" tabindex="-1"><a class="header-anchor" href="#\u043A\u043E\u043D\u0446\u0435\u043F\u0442" aria-hidden="true">#</a> \u041A\u043E\u043D\u0446\u0435\u043F\u0442</h2><p>\u041A\u043B\u0430\u0441\u0441 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u043E\u0431\u0449\u0435\u043D\u0438\u0435\u043C \u0432\u0441\u0435\u0445 \u0442\u0440\u0451\u0445 \u0441\u043F\u043E\u0441\u043E\u0431\u043E\u0432 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0432 \u043E\u0434\u043D\u043E\u043C \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435. \u0421\u043E\u0431\u044B\u0442\u0438\u044F \u043F\u0440\u0438\u0445\u043E\u0434\u044F\u0442 \u0432 \u0443\u043D\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u0430\u0445, \u0443 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u0430 \u0435\u0441\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0442\u0438\u043F \u0441\u043E\u0431\u044B\u0442\u0438\u044F \u0438 \u0435\u0433\u043E \u043F\u043E\u0434\u0442\u0438\u043F\u044B. \u0417\u0430 \u0441\u0447\u0451\u0442 \u044D\u0442\u043E\u0433\u043E \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0442\u0438\u043F \u0441\u043E\u0431\u044B\u0442\u0438\u044F, \u0438 \u0432\u044B \u0431\u0443\u0434\u0435\u0442\u0435 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u044C \u0432\u0441\u0435 \u0435\u0433\u043E \u043F\u043E\u0434\u0442\u0438\u043F\u044B. \u0418\u043B\u0438 \u043C\u043E\u0436\u043D\u043E \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u043F\u043E\u0434\u0442\u0438\u043F.</p>`,3),C={class:"custom-container tip"},A=n("p",{class:"custom-container-title"},"\u0421\u043E\u0432\u0435\u0442",-1),B=s("\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u043E \u043F\u043E\u0447\u0438\u0442\u0430\u0442\u044C \u043F\u0440\u043E \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u044B "),E=s("\u0437\u0434\u0435\u0441\u044C"),O=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u0421\u043E\u0431\u044B\u0442\u0438\u044F \u043F\u043E \u0442\u0438\u043F\u0443</span>
updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// context.type // message</span>
	<span class="token comment">// context.subTypes // [&#39;message_new&#39;]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u0421\u043E\u0431\u044B\u0442\u0438\u044F \u043F\u043E \u043F\u043E\u0434\u0442\u0438\u043F\u0443</span>
updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message_new&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// context.type // message</span>
	<span class="token comment">// context.subTypes // [&#39;message_new&#39;]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="middleware" tabindex="-1"><a class="header-anchor" href="#middleware" aria-hidden="true">#</a> Middleware</h3>`,2),W=s("\u0421\u043F\u0435\u0440\u0432\u0430 \u043C\u043E\u0436\u0435\u0442 \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u0441\u044F \u0447\u0442\u043E \u043A\u043B\u0430\u0441\u0441 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0438\u043D\u0441\u0442\u0430\u043D\u0446\u0438\u0435\u0439 "),N={href:"https://nodejs.org/api/events.html#events_class_eventemitter",target:"_blank",rel:"noopener noreferrer"},j=s("EventEmitter"),M=s(", \u043D\u043E \u044D\u0442\u043E \u043D\u0435 \u0442\u0430\u043A. \u041C\u043E\u0434\u0443\u043B\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442 \u0446\u0435\u043F\u043E\u0447\u043A\u0443 "),R={href:"https://en.wikipedia.org/wiki/Middleware",target:"_blank",rel:"noopener noreferrer"},T=s("middleware"),V=s(". \u042D\u0442\u043E \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u0431\u043E\u043B\u0435\u0435 \u044D\u043B\u0435\u0433\u0430\u043D\u0442\u043D\u043E \u043E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u044F, \u0430 \u0438\u043C\u0435\u043D\u043D\u043E:"),S={href:"https://github.com/negezor/vk-io/blob/master/docs/examples/advanced/middleware-error-fallback.js",target:"_blank",rel:"noopener noreferrer"},G=s("\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u043E\u0448\u0438\u0431\u043E\u043A"),K=n("li",null,"\u0424\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439",-1),D={href:"https://github.com/negezor/vk-io/blob/master/docs/examples/advanced/context-modification.js",target:"_blank",rel:"noopener noreferrer"},J=s("\u041C\u043E\u0434\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u044F \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u0430"),F=n("li",null,"\u0412\u044B\u0437\u044B\u0432\u0430\u0442\u044C \u043A\u0430\u043A\u0438\u0435-\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0441\u043B\u0435 \u0440\u0430\u0431\u043E\u0442\u044B \u0433\u043B\u0430\u0432\u043D\u044B\u0445 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u043E\u0432",-1),H=e(`<p>\u041F\u0440\u043E\u0441\u0442\u043E\u0439 \u043F\u0440\u0438\u043C\u0435\u0440 \u0441 \u043C\u043E\u0434\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0435\u0439 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u0430:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	context<span class="token punctuation">.</span>myProp <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;My prop&#39;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>myProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),Q=s("\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u043C \u043C\u0435\u0442\u043E\u0434\u043E\u043C \u0434\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u0441 \u0446\u0435\u043F\u043E\u0447\u043A\u043E\u0439 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F "),X={href:"https://negezor.github.io/vk-io/references/vk-io/classes/Updates.html#use",target:"_blank",rel:"noopener noreferrer"},Y=s(".use()"),Z=s(", \u0438\u043C\u0435\u043D\u043D\u043E \u0447\u0435\u0440\u0435\u0437 \u043D\u0435\u0433\u043E \u043F\u0440\u043E\u0445\u043E\u0434\u044F\u0442 \u0432\u0441\u0435 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F, \u043F\u043E\u044D\u0442\u043E\u043C\u0443 \u0441\u0442\u043E\u0438\u0442 \u0432\u043D\u0438\u043C\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u043E\u0442\u043D\u043E\u0441\u0438\u0442\u044C\u0441\u044F \u0432 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F\u0445 \u0432\u043D\u0443\u0442\u0440\u0438 \u043D\u0435\u0433\u043E."),$=e(`<p>\u041F\u0440\u0438\u043C\u0435\u0440 \u043D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0439 \u0440\u0430\u0431\u043E\u0442\u044B:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">.</span>isOutbox<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u0411\u043E\u043B\u044C\u0448\u0435 \u043D\u0438\u043A\u043E\u0433\u0434\u0430 \u043D\u0435 \u0432\u044B\u0437\u043E\u0432\u0435\u0442\u0441\u044F, \u0442\u0430\u043A \u043A\u0430\u043A \u0443 \u044D\u0442\u043E\u0433\u043E \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u0430 \u043D\u0435\u0442 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \`isOutbox\`</span>
updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;like&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),nn=s("\u0418\u0441\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u044D\u0442\u043E \u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u043F\u0440\u043E\u0441\u0442\u043E, \u043C\u043E\u0436\u043D\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0441\u0440\u0430\u0437\u0443 \u043C\u0435\u0442\u043E\u0434 "),sn={href:"https://negezor.github.io/vk-io/references/vk-io/classes/Updates.html#on",target:"_blank",rel:"noopener noreferrer"},an=s(".on()"),tn=s(" \u0438\u043B\u0438 \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E \u0432\u044B\u0437\u044B\u0432\u0430\u0442\u044C "),en={href:"https://negezor.github.io/vk-io/references/vk-io/classes/Context.html#is",target:"_blank",rel:"noopener noreferrer"},on=s("context.is()"),pn=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token keyword">is</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>context<span class="token punctuation">.</span>isOutbox<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u0422\u0435\u043F\u0435\u0440\u044C \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442 \u0434\u043E\u0439\u0434\u0451\u0442 \u0434\u043E \u044D\u0442\u043E\u0433\u043E middleware</span>
updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;like&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),cn=s("\u0421 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435\u043C "),ln={href:"https://negezor.github.io/vk-io/references/vk-io/classes/Updates.html#on",target:"_blank",rel:"noopener noreferrer"},un=s(".on()"),rn=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">.</span>isOutbox<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u0422\u0435\u043F\u0435\u0440\u044C \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442 \u0434\u043E\u0439\u0434\u0451\u0442 \u0434\u043E \u044D\u0442\u043E\u0433\u043E middleware</span>
updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;like&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),dn={class:"custom-container warning"},kn=n("p",{class:"custom-container-title"},"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435",-1),hn=s("\u0412\u0430\u0436\u043D\u043E, \u0447\u0442\u043E\u0431\u044B middleware \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u043B "),vn={href:"https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise",target:"_blank",rel:"noopener noreferrer"},mn=s("Promise"),bn=s(", \u0435\u0441\u043B\u0438 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0431\u0443\u0434\u0435\u0442 \u0434\u0430\u043B\u044C\u0448\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D\u0430 \u043F\u043E \u0446\u0435\u043F\u043E\u0447\u043A\u0435, \u0442\u0430\u043A \u043A\u0430\u043A \u0431\u0435\u0437 \u044D\u0442\u043E\u0433\u043E \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u0441\u043B\u0435\u0434\u0438\u0442\u044C \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u043E\u0448\u0438\u0431\u043A\u0438/\u0434\u043E\u0436\u0434\u0430\u0442\u0441\u044F \u043E\u043A\u043E\u043D\u0447\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u0434\u043B\u044F \u0434\u0440\u0443\u0433\u0438\u0445 middleware."),_n=n("h2",{id:"\u0441\u043F\u0438\u0441\u043E\u043A-\u0441\u043E\u0431\u044B\u0442\u0438\u0438",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u0441\u043F\u0438\u0441\u043E\u043A-\u0441\u043E\u0431\u044B\u0442\u0438\u0438","aria-hidden":"true"},"#"),s(" \u0421\u043F\u0438\u0441\u043E\u043A \u0441\u043E\u0431\u044B\u0442\u0438\u0439")],-1),gn=s("\u0411\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0430 \u043F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043E\u0444\u0438\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u043C \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F\u043C \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0434\u043B\u044F \u0433\u0440\u0443\u043F\u043F, \u043F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0438\u0445 \u043C\u043E\u0436\u043D\u043E "),fn={href:"https://vk.com/dev/groups_events",target:"_blank",rel:"noopener noreferrer"},xn=s("\u0437\u0434\u0435\u0441\u044C"),wn=s("."),yn=e(`<h2 id="webhook-callback-api" tabindex="-1"><a class="header-anchor" href="#webhook-callback-api" aria-hidden="true">#</a> Webhook (Callback API)</h2><p>\u0412 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445 \u0433\u0440\u0443\u043F\u043F\u044B \u043D\u0443\u0436\u043D\u043E \u0432\u044B\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0432\u0435\u0440\u0441\u0438\u044E Callback API \u0432\u044B\u0448\u0435 <code>5.130</code> \u0438 \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043D\u0443\u0436\u043D\u044B\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F</p><blockquote><p>\u041F\u0440\u0435\u0434\u043D\u0430\u0437\u043D\u0430\u0447\u0435\u043D \u0434\u043B\u044F \u0433\u0440\u0443\u043F\u043F</p></blockquote><blockquote><p>\u0418\u043C\u0435\u0435\u0442 \u043F\u043E\u043B\u043D\u044B\u0439 \u043D\u0430\u0431\u043E\u0440 \u0434\u0430\u043D\u043D\u044B\u0445</p></blockquote><h3 id="\u0437\u0430\u043F\u0443\u0441\u043A-\u0432\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u043E\u0433\u043E-\u0441\u0435\u0440\u0432\u0435\u0440\u0430" tabindex="-1"><a class="header-anchor" href="#\u0437\u0430\u043F\u0443\u0441\u043A-\u0432\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u043E\u0433\u043E-\u0441\u0435\u0440\u0432\u0435\u0440\u0430" aria-hidden="true">#</a> \u0417\u0430\u043F\u0443\u0441\u043A \u0432\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u043E\u0433\u043E \u0441\u0435\u0440\u0432\u0435\u0440\u0430</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	webhook<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// ...</span>
		path<span class="token operator">:</span> <span class="token string">&#39;/super-secret-webhook-path&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435-express-middleware" tabindex="-1"><a class="header-anchor" href="#\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435-express-middleware" aria-hidden="true">#</a> \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 express middleware</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/super-secret-webhook-path&#39;</span><span class="token punctuation">,</span> updates<span class="token punctuation">.</span><span class="token function">getWebhookCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435-koa-middleware" tabindex="-1"><a class="header-anchor" href="#\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435-koa-middleware" aria-hidden="true">#</a> \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 koa middleware</h3>`,9),Pn=s("\u041F\u0440\u0435\u0434\u043F\u043E\u043B\u0430\u0433\u0430\u0435\u0442\u0441\u044F \u0447\u0442\u043E \u0432\u044B \u0443\u0436\u0435 \u0440\u0430\u0437\u043E\u0431\u0440\u0430\u043B\u0438 \u0442\u0435\u043B\u043E \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440 \u0447\u0435\u0440\u0435\u0437 "),Un={href:"https://github.com/dlau/koa-body",target:"_blank",rel:"noopener noreferrer"},In=s("koa-body"),qn=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/super-secret-webhook-path&#39;</span><span class="token punctuation">,</span> updates<span class="token punctuation">.</span><span class="token function">getKoaWebhookMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435-\u043D\u0430\u0442\u0438\u0432\u043D\u043E\u0433\u043E-\u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440\u0430" tabindex="-1"><a class="header-anchor" href="#\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435-\u043D\u0430\u0442\u0438\u0432\u043D\u043E\u0433\u043E-\u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440\u0430" aria-hidden="true">#</a> \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u043D\u0430\u0442\u0438\u0432\u043D\u043E\u0433\u043E \u0432\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440\u0430</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>updates<span class="token punctuation">.</span><span class="token function">getWebhookCallback</span><span class="token punctuation">(</span><span class="token string">&#39;/super-secret-webhook-path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="polling-bots-long-poll" tabindex="-1"><a class="header-anchor" href="#polling-bots-long-poll" aria-hidden="true">#</a> Polling (Bots Long Poll)</h2><p>\u0412 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445 \u0433\u0440\u0443\u043F\u043F\u044B \u043D\u0443\u0436\u043D\u043E \u0432\u044B\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0432\u0435\u0440\u0441\u0438\u044E Bots Long Poll API \u0432\u044B\u0448\u0435 <code>5.130</code> \u0438 \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043D\u0443\u0436\u043D\u044B\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F</p><blockquote><p>\u041F\u0440\u0435\u0434\u043D\u0430\u0437\u043D\u0430\u0447\u0435\u043D \u0434\u043B\u044F \u0433\u0440\u0443\u043F\u043F</p></blockquote><blockquote><p>\u0418\u043C\u0435\u0435\u0442 \u043F\u043E\u043B\u043D\u044B\u0439 \u043D\u0430\u0431\u043E\u0440 \u0434\u0430\u043D\u043D\u044B\u0445</p></blockquote><div class="custom-container tip"><p class="custom-container-title">\u0421\u043E\u0432\u0435\u0442</p><p>\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u043F\u0440\u043E\u0438\u0437\u043E\u0439\u0434\u0451\u0442 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\u0435 <code>pollingGroupId</code> \u0434\u043B\u044F \u0437\u0430\u043F\u0443\u0441\u043A\u0430 Bots Long Poll, \u0434\u043B\u044F \u0438\u0437\u0431\u0435\u0436\u0430\u043D\u0438\u044F \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u0441\u0442\u043E\u0438\u0442 \u043F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044C \u0435\u0433\u043E \u0437\u0430\u0440\u0430\u043D\u0435\u0435.</p></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="polling-user-long-poll" tabindex="-1"><a class="header-anchor" href="#polling-user-long-poll" aria-hidden="true">#</a> Polling (User Long Poll)</h2><p>\u0412 \u043E\u0442\u043B\u0438\u0447\u0438\u0435 \u043E\u0442 Bots Long Poll \u0438 Callback API \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u0440\u0438\u0445\u043E\u0434\u044F\u0442 \u0447\u0430\u0441\u0442\u0438\u0447\u043D\u043E, \u044D\u0442\u043E \u0441\u0442\u043E\u0438\u0442 \u0443\u0447\u0438\u0442\u044B\u0432\u0430\u0442\u044C. \u041D\u0443\u0436\u043D\u043E \u043F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u044F \u0438\u043B\u0438 \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u044F \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u043D\u043E\u0433\u043E \u043E\u0431\u044A\u0435\u043A\u0442\u0430, \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u0441 \u043D\u0438\u0445 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0442\u043E\u043B\u044C\u043A\u043E ID.</p><blockquote><p>\u041F\u0440\u0435\u0434\u043D\u0430\u0437\u043D\u0430\u0447\u0435\u043D \u0434\u043B\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439</p></blockquote><blockquote><p>\u0418\u043C\u0435\u0435\u0442 \u0447\u0430\u0441\u0442\u0438\u0447\u043D\u044B\u0439 \u043D\u0430\u0431\u043E\u0440 \u0434\u0430\u043D\u043D\u044B\u0445</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">startPolling</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u0440\u0443\u0447\u043D\u0430\u044F-\u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0430-\u0441\u043E\u0431\u044B\u0442\u0438\u0438" tabindex="-1"><a class="header-anchor" href="#\u0440\u0443\u0447\u043D\u0430\u044F-\u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0430-\u0441\u043E\u0431\u044B\u0442\u0438\u0438" aria-hidden="true">#</a> \u0420\u0443\u0447\u043D\u0430\u044F \u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0441\u043E\u0431\u044B\u0442\u0438\u0439</h2>`,15),zn=s("\u0415\u0441\u043B\u0438 \u043F\u043E \u043A\u0430\u043A\u0438\u043C-\u0442\u043E \u043F\u0440\u0438\u0447\u0438\u043D\u0430\u043C \u0432\u0430\u043C \u043D\u0435 \u043F\u043E\u0434\u043E\u0448\u043B\u0438 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0435 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0435 \u0441\u043F\u043E\u0441\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439, \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0438\u0445 \u043F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044C \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0435 \u0432\u0440\u0443\u0447\u043D\u0443\u044E \u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E "),Ln={href:"https://negezor.github.io/vk-io/references/vk-io/classes/Updates.html#handleWebhookUpdate",target:"_blank",rel:"noopener noreferrer"},Cn=s("updates.handleWebhookUpdate()"),An=s(" \u0438\u043B\u0438 "),Bn={href:"https://negezor.github.io/vk-io/references/vk-io/classes/Updates.html#handlePollingUpdate",target:"_blank",rel:"noopener noreferrer"},En=s("updates.handlePollingUpdate()");function On(Wn,Nn){const t=o("ExternalLinkIcon"),p=o("RouterLink");return i(),l("div",null,[d,n("p",null,[k,n("a",h,[v,a(t)]),m,n("a",b,[_,a(t)]),g,n("a",f,[x,a(t)]),w]),y,n("p",null,[n("a",P,[U,a(t)])]),I,n("p",null,[n("a",q,[z,a(t)])]),L,n("div",C,[A,n("p",null,[B,a(p,{to:"/ru/guide/contexts.html"},{default:u(()=>[E]),_:1})])]),O,n("p",null,[W,n("a",N,[j,a(t)]),M,n("a",R,[T,a(t)]),V]),n("ul",null,[n("li",null,[n("a",S,[G,a(t)])]),K,n("li",null,[n("a",D,[J,a(t)])]),F]),H,n("p",null,[Q,n("a",X,[Y,a(t)]),Z]),$,n("p",null,[nn,n("a",sn,[an,a(t)]),tn,n("a",en,[on,a(t)])]),pn,n("p",null,[cn,n("a",ln,[un,a(t)])]),rn,n("div",dn,[kn,n("p",null,[hn,n("a",vn,[mn,a(t)]),bn])]),_n,n("p",null,[gn,n("a",fn,[xn,a(t)]),wn]),yn,n("p",null,[Pn,n("a",Un,[In,a(t)])]),qn,n("p",null,[zn,n("a",Ln,[Cn,a(t)]),An,n("a",Bn,[En,a(t)])])])}const Mn=c(r,[["render",On],["__file","updates.html.vue"]]);export{Mn as default};
