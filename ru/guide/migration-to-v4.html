<!DOCTYPE html>
<html lang="ru-RU">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="theme-color" content="#44668D"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Обновление до v4 | VK-IO</title><meta name="description" content="Современный VK API SDK для Node.js">
    <link rel="modulepreload" href="/vk-io/assets/app.4383cdfd.js"><link rel="modulepreload" href="/vk-io/assets/migration-to-v4.html.0424f4a7.js"><link rel="modulepreload" href="/vk-io/assets/migration-to-v4.html.ea3a9709.js"><link rel="prefetch" href="/vk-io/assets/index.html.58d39e55.js"><link rel="prefetch" href="/vk-io/assets/index.html.a51fa1a0.js"><link rel="prefetch" href="/vk-io/assets/index.html.a1773881.js"><link rel="prefetch" href="/vk-io/assets/auth.html.5c3c556a.js"><link rel="prefetch" href="/vk-io/assets/api.html.f12a44c5.js"><link rel="prefetch" href="/vk-io/assets/attachments.html.6509ffd9.js"><link rel="prefetch" href="/vk-io/assets/collect-iterator.html.b86074d0.js"><link rel="prefetch" href="/vk-io/assets/collect.html.04c2e4fa.js"><link rel="prefetch" href="/vk-io/assets/contexts.html.98ae8322.js"><link rel="prefetch" href="/vk-io/assets/installation.html.977a8e07.js"><link rel="prefetch" href="/vk-io/assets/introduction.html.42271c9f.js"><link rel="prefetch" href="/vk-io/assets/keyboard.html.70ae767f.js"><link rel="prefetch" href="/vk-io/assets/modules.html.19d9d98a.js"><link rel="prefetch" href="/vk-io/assets/updates.html.84657d38.js"><link rel="prefetch" href="/vk-io/assets/upload.html.8530f387.js"><link rel="prefetch" href="/vk-io/assets/utils.html.bd633ecc.js"><link rel="prefetch" href="/vk-io/assets/audio.html.7c044a5d.js"><link rel="prefetch" href="/vk-io/assets/document.html.8fd91dab.js"><link rel="prefetch" href="/vk-io/assets/photo.html.da522140.js"><link rel="prefetch" href="/vk-io/assets/video.html.b8f1a4aa.js"><link rel="prefetch" href="/vk-io/assets/wall.html.ee0020a8.js"><link rel="prefetch" href="/vk-io/assets/message.html.ecde543e.js"><link rel="prefetch" href="/vk-io/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/vk-io/assets/index.html.653506ee.js"><link rel="prefetch" href="/vk-io/assets/index.html.7504ad96.js"><link rel="prefetch" href="/vk-io/assets/index.html.a8413569.js"><link rel="prefetch" href="/vk-io/assets/auth.html.808c29e6.js"><link rel="prefetch" href="/vk-io/assets/api.html.cc915eef.js"><link rel="prefetch" href="/vk-io/assets/attachments.html.fb15bef5.js"><link rel="prefetch" href="/vk-io/assets/collect-iterator.html.128fc180.js"><link rel="prefetch" href="/vk-io/assets/collect.html.7cd6a264.js"><link rel="prefetch" href="/vk-io/assets/contexts.html.386627d3.js"><link rel="prefetch" href="/vk-io/assets/installation.html.34c1452b.js"><link rel="prefetch" href="/vk-io/assets/introduction.html.9f16f522.js"><link rel="prefetch" href="/vk-io/assets/keyboard.html.8afeff10.js"><link rel="prefetch" href="/vk-io/assets/modules.html.df930aaf.js"><link rel="prefetch" href="/vk-io/assets/updates.html.52a443e3.js"><link rel="prefetch" href="/vk-io/assets/upload.html.041f83eb.js"><link rel="prefetch" href="/vk-io/assets/utils.html.181729aa.js"><link rel="prefetch" href="/vk-io/assets/audio.html.e091b6b3.js"><link rel="prefetch" href="/vk-io/assets/document.html.449ec413.js"><link rel="prefetch" href="/vk-io/assets/photo.html.f11608e8.js"><link rel="prefetch" href="/vk-io/assets/video.html.57b4f1d0.js"><link rel="prefetch" href="/vk-io/assets/wall.html.586978e7.js"><link rel="prefetch" href="/vk-io/assets/message.html.f013e986.js"><link rel="prefetch" href="/vk-io/assets/404.html.08eac397.js">
    <link rel="stylesheet" href="/vk-io/assets/style.f4dbd3cb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vk-io/ru/" class=""><img class="logo" src="/vk-io/logo.svg" alt="VK-IO"><span class="site-name can-hide">VK-IO</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/vk-io/ru/guide/introduction" class="" aria-label="Guide [RU]"><!--[--><!--]--> Guide [RU] <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Community"><span class="title">Community</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Community"><span class="title">Community</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://t.me/vkio_ru" rel="noopener noreferrer" target="_blank" aria-label="Telegram [RU]"><!--[--><!--]--> Telegram [RU] <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/vk-io/references/" class="" aria-label="References"><!--[--><!--]--> References <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/negezor/vk-io/tree/master/docs/examples" rel="noopener noreferrer" target="_blank" aria-label="Examples"><!--[--><!--]--> Examples <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vk-io/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Русский"><!--[--><!--]--> Русский <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/negezor/vk-io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/vk-io/ru/guide/introduction" class="" aria-label="Guide [RU]"><!--[--><!--]--> Guide [RU] <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Community"><span class="title">Community</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Community"><span class="title">Community</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://t.me/vkio_ru" rel="noopener noreferrer" target="_blank" aria-label="Telegram [RU]"><!--[--><!--]--> Telegram [RU] <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/vk-io/references/" class="" aria-label="References"><!--[--><!--]--> References <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/negezor/vk-io/tree/master/docs/examples" rel="noopener noreferrer" target="_blank" aria-label="Examples"><!--[--><!--]--> Examples <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vk-io/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Русский"><!--[--><!--]--> Русский <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/negezor/vk-io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Основы <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vk-io/ru/guide/introduction.html" class="sidebar-item" aria-label="Введение"><!--[--><!--]--> Введение <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/installation.html" class="sidebar-item" aria-label="Установка"><!--[--><!--]--> Установка <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/modules.html" class="sidebar-item" aria-label="Модули"><!--[--><!--]--> Модули <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/api.html" class="sidebar-item" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/upload.html" class="sidebar-item" aria-label="Upload"><!--[--><!--]--> Upload <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/updates.html" class="sidebar-item" aria-label="Updates"><!--[--><!--]--> Updates <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/keyboard.html" class="sidebar-item" aria-label="Keyboard"><!--[--><!--]--> Keyboard <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/collect.html" class="sidebar-item" aria-label="Collect"><!--[--><!--]--> Collect <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/attachments.html" class="sidebar-item" aria-label="Attachments"><!--[--><!--]--> Attachments <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/contexts.html" class="sidebar-item" aria-label="Contexts"><!--[--><!--]--> Contexts <!--[--><!--]--></a><!----></li><li><a href="/vk-io/ru/guide/utils.html" class="sidebar-item" aria-label="Utils"><!--[--><!--]--> Utils <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Миграции <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Обновление до v4"><!--[--><!--]--> Обновление до v4 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#tl-dr" class="router-link-active router-link-exact-active sidebar-item" aria-label="TL;DR"><!--[--><!--]--> TL;DR <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#breaking-сhanges" class="router-link-active router-link-exact-active sidebar-item" aria-label="Breaking Сhanges"><!--[--><!--]--> Breaking Сhanges <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#поддержка-node-js-12-и-выше" class="router-link-active router-link-exact-active sidebar-item" aria-label="Поддержка Node.js 12 и выше"><!--[--><!--]--> Поддержка Node.js 12 и выше <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#vk" class="router-link-active router-link-exact-active sidebar-item" aria-label="VK"><!--[--><!--]--> VK <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#api" class="router-link-active router-link-exact-active sidebar-item" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#apirequest" class="router-link-active router-link-exact-active sidebar-item" aria-label="APIRequest"><!--[--><!--]--> APIRequest <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#attachment-externalattachment" class="router-link-active router-link-exact-active sidebar-item" aria-label="Attachment &amp; ExternalAttachment"><!--[--><!--]--> Attachment &amp; ExternalAttachment <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#documentattachment" class="router-link-active router-link-exact-active sidebar-item" aria-label="DocumentAttachment"><!--[--><!--]--> DocumentAttachment <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#context" class="router-link-active router-link-exact-active sidebar-item" aria-label="Context"><!--[--><!--]--> Context <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#messagecontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="MessageContext"><!--[--><!--]--> MessageContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#commentactioncontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="CommentActionContext"><!--[--><!--]--> CommentActionContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#commentcontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="CommentContext"><!--[--><!--]--> CommentContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#messageflagscontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="MessageFlagsContext"><!--[--><!--]--> MessageFlagsContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#dialogflagscontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="DialogFlagsContext"><!--[--><!--]--> DialogFlagsContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#removedmessagescontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="RemovedMessagesContext"><!--[--><!--]--> RemovedMessagesContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#dialogmessagescontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="DialogMessagesContext"><!--[--><!--]--> DialogMessagesContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#useronlinecontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="UserOnlineContext"><!--[--><!--]--> UserOnlineContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#friendactivitycontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="FriendActivityContext"><!--[--><!--]--> FriendActivityContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#readmessagescontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="ReadMessagesContext"><!--[--><!--]--> ReadMessagesContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#messagesreadcontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="MessagesReadContext"><!--[--><!--]--> MessagesReadContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#messageallowcontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="MessageAllowContext"><!--[--><!--]--> MessageAllowContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#messagesubscriptioncontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="MessageSubscriptionContext"><!--[--><!--]--> MessageSubscriptionContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#keyboard" class="router-link-active router-link-exact-active sidebar-item" aria-label="Keyboard"><!--[--><!--]--> Keyboard <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#updates" class="router-link-active router-link-exact-active sidebar-item" aria-label="Updates"><!--[--><!--]--> Updates <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#upload" class="router-link-active router-link-exact-active sidebar-item" aria-label="Upload"><!--[--><!--]--> Upload <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#callback-service" class="router-link-active router-link-exact-active sidebar-item" aria-label="Callback Service"><!--[--><!--]--> Callback Service <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vk-io/ru/guide/migration-to-v4.html#удаленные-экспорты" class="router-link-active router-link-exact-active sidebar-item" aria-label="Удалённые экспорты"><!--[--><!--]--> Удалённые экспорты <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="обновление-до-v4" tabindex="-1"><a class="header-anchor" href="#обновление-до-v4" aria-hidden="true">#</a> Обновление до v4</h1><p>VK-IO v4 — это следующее мажорное обновление. Ниже приведён список критических изменений, который поможет вам обновиться.</p><h2 id="tl-dr" tabindex="-1"><a class="header-anchor" href="#tl-dr" aria-hidden="true">#</a> TL;DR</h2><ul><li>Были произведены серьёзные изменения в типизации библиотеки</li><li>Библиотека теперь полностью следует <a href="https://ru.wikipedia.org/wiki/%D0%9D%D0%B5%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%B9_%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82" target="_blank" rel="noopener noreferrer">immutable<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> принципу.</li><li>Каждый компонент теперь не зависит от основной инстанции <code>VK</code></li><li>Убраны лишние компоненты в пользу простых функций (например <code>resolveResource()</code> или <code>createCollectIterator()</code>)</li></ul><details class="custom-container details"><summary>Если ещё короче</summary><p><img src="https://user-images.githubusercontent.com/9392723/89174354-6d7cd480-d5d1-11ea-8336-9ad40152b812.png" alt="cheems meme"></p></details><h2 id="breaking-сhanges" tabindex="-1"><a class="header-anchor" href="#breaking-сhanges" aria-hidden="true">#</a> Breaking Сhanges</h2><h3 id="поддержка-node-js-12-и-выше" tabindex="-1"><a class="header-anchor" href="#поддержка-node-js-12-и-выше" aria-hidden="true">#</a> Поддержка Node.js 12 и выше</h3><p>Библиотека поддерживает теперь только Node.js 12 и выше.</p><h3 id="vk" tabindex="-1"><a class="header-anchor" href="#vk" aria-hidden="true">#</a> VK</h3><ul><li>Удалён геттер/сеттер <code>vk.token</code></li><li>Удалён метод <code>vk.setOptions()</code></li><li>Удалён сеттер <code>vk.captchaHandler</code>, используйте метод <code>vk.callbackService.onCaptcha()</code></li><li>Удалён сеттер <code>vk.twoFactorHandler</code>, используйте метод <code>vk.callbackService.onTwoFactor()</code></li><li>Удалён модуль <code>vk.auth</code>, используйте вместо этого пакет <a href="https://github.com/negezor/vk-io/tree/master/packages/authorization" target="_blank" rel="noopener noreferrer">@vk-io/authorization<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Удалён модуль <code>vk.streaming</code>, используйте вместо этого пакет <a href="https://github.com/negezor/vk-io/tree/master/packages/streaming" target="_blank" rel="noopener noreferrer">@vk-io/streaming<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Удалён экспорт по умолчанию, используйте именованный</li></ul><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import VK from &#39;vk-io&#39;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import { VK } from &#39;vk-io&#39;;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Удалён <code>vk.snippets.resolveResource()</code>, вместо модуля добавлена функция <code>resolveResource()</code> Принимает опции вида:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IResolveResourceOptions</span> <span class="token punctuation">{</span>
	resource<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	api<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Например</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> resolveResource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">resolveResource</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// Объект API</span>
	api<span class="token punctuation">,</span>

	resource<span class="token operator">:</span> <span class="token string">&#39;https://vk.com/durov&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Удалён <code>vk.collect</code>, модуль разбит на мелкие классы и функции</li><li><ul><li><strong>collect.chain()</strong> - используйте класс <code>new Chain()</code></li></ul></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Chain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> chain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chain</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// Объект API</span>
	api
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><ul><li><strong>collect.executes()</strong> - используйте функцию <code>executes()</code> Принимает опции вида:</li></ul></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IExecutesOptions</span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	<span class="token comment">// eslint-disable-next-line @typescript-eslint/no-explicit-any</span>
	queue<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Например</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> executes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">executes</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// Объект API</span>
	api<span class="token punctuation">,</span>
	
	method<span class="token operator">:</span> <span class="token string">&#39;users.get&#39;</span><span class="token punctuation">,</span>
	queue<span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span> user_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> user_id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span> user_id<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// ...</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><ul><li><strong>collect.<em>.</em>()</strong> - используйте функцию <code>createCollectIterator()</code> Принимает опции вида:</li></ul></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ICollectIteratorOptions</span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
		count<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
		offset<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	maxCount<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	countPerRequest<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

	retryLimit<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	parallelRequests<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Например</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createCollectIterator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token function">createCollectIterator</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// Объект API</span>
	api<span class="token punctuation">,</span>

	method<span class="token operator">:</span> <span class="token string">&#39;messages.getConversations&#39;</span><span class="token punctuation">,</span>
	params<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// Будет получать profiles и groups</span>
		extended<span class="token operator">:</span> <span class="token number">1</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Максимальный count в методе</span>
	countPerRequest<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>

	<span class="token comment">// Устанавливайте опцию для методов которые не позволяет получить больше N данных, например `users.search`</span>
	<span class="token comment">// maxCount: 1000,</span>

	<span class="token comment">// Количество попыток вызвать снова при ошибке</span>
	<span class="token comment">// retryLimit: 3,</span>

	<span class="token comment">// Количество паралельных вызовов если поддерживается execute</span>
	<span class="token comment">// parallelRequests: 25</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunk <span class="token keyword">of</span> iterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// chunk.received</span>
	<span class="token comment">// chunk.percent</span>
	<span class="token comment">// chunk.total</span>

	<span class="token comment">// chunk.items</span>
	<span class="token comment">// chunk.profiles</span>
	<span class="token comment">// chunk.groups</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h3><ul><li>Переименование опции <strong>apiAttempts</strong> в <strong>apiRetryLimit</strong></li><li>Удалён геттер <code>vk.api.API_VERSION</code></li><li>Enum <code>APIErrorCode</code> теперь автоматический генерируется из <a href="https://github.com/VKCOM/vk-api-schema" target="_blank" rel="noopener noreferrer">схемы<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Объкты схемы теперь экспортируются в своих namespace <code>Params</code>, <code>Objects</code> и <code>Responses</code></li><li>Удалена автоматическая верификация аккаунта, используйте <code>@vk-io/authorization</code> класс <code>AccountVerification</code></li><li>Удалена автоматическая установка <code>random_id</code> в <code>api.messages.send()</code>, используйте вместо этого функцию <code>getRandomId()</code></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getRandomId <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vk-io&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	peer_id<span class="token operator">:</span> <span class="token number">1234</span><span class="token punctuation">,</span>
	random_id<span class="token operator">:</span> <span class="token function">getRandomId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

	text<span class="token operator">:</span> <span class="token string">&#39;Hello!&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="apirequest" tabindex="-1"><a class="header-anchor" href="#apirequest" aria-hidden="true">#</a> APIRequest</h3><ul><li>Конструктор теперь принимает опции вида:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IAPIRequestOptions</span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Удалён алиас <code>Request</code>, используйте <code>APIRequest</code></li></ul><h3 id="attachment-externalattachment" tabindex="-1"><a class="header-anchor" href="#attachment-externalattachment" aria-hidden="true">#</a> Attachment &amp; ExternalAttachment</h3><ul><li>Конструктор теперь принимает опции вида:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ISharedAttachmentPayload</span> <span class="token punctuation">{</span>
	id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	owner_id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	access_key<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IAttachmentOptions<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> Type <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>

	type<span class="token operator">:</span> Type<span class="token punctuation">;</span>
	payload<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>ISharedAttachmentPayload<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token constant">P</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="documentattachment" tabindex="-1"><a class="header-anchor" href="#documentattachment" aria-hidden="true">#</a> DocumentAttachment</h3><ul><li>Удалён геттер <code>document.typeName</code></li></ul><h3 id="context" tabindex="-1"><a class="header-anchor" href="#context" aria-hidden="true">#</a> Context</h3><ul><li>Конструктор теперь принимает опции вида:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IContextOptions<span class="token operator">&lt;</span>
	<span class="token constant">P</span><span class="token punctuation">,</span>
	<span class="token constant">S</span><span class="token punctuation">,</span>
	Type <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
	SubType <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
	api<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">;</span>
	upload<span class="token operator">:</span> Upload<span class="token punctuation">;</span>

	type<span class="token operator">:</span> Type<span class="token punctuation">;</span>
	subTypes<span class="token operator">:</span> SubType<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	payload<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">;</span>
	state<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">;</span>

	source<span class="token operator">:</span> UpdateSource<span class="token punctuation">;</span>
	updateType<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

	groupId<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Метод <code>context.is()</code> принимает теперь массив типов</li></ul><h3 id="messagecontext" tabindex="-1"><a class="header-anchor" href="#messagecontext" aria-hidden="true">#</a> MessageContext</h3><ul><li>Метод <code>context.send()</code> теперь возвращает инстанцию <code>MessageContext</code></li><li>Геттер <code>context.replyMessage</code> теперь возвращает <code>MessageContext</code> вместо <code>MessageReply</code></li><li>Геттер <code>context.forwards</code> теперь возвращает массив <code>MessageContext</code> вместо <code>MessageForward</code></li><li>Изменились входные параметры для методов <code>context.sendPhotos()</code>, <code>context.sendDocuments()</code>, <code>context.sendAudioMessage()</code> и <code>context.sendAudioMessage()</code>. Теперь они принимают объект.</li></ul><p>Было:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>context<span class="token punctuation">.</span><span class="token function">sendPhotos</span><span class="token punctuation">(</span><span class="token string">&#39;./cat.png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Стало:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>context<span class="token punctuation">.</span><span class="token function">sendPhotos</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	value<span class="token operator">:</span> <span class="token string">&#39;./cat.png&#39;</span><span class="token punctuation">,</span>
	<span class="token comment">// filename: &#39;cat.png&#39;,</span>
	<span class="token comment">// contentType: &#39;image/png&#39;,</span>
	<span class="token comment">// contentLength: ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Или</span>

context<span class="token punctuation">.</span><span class="token function">sendPhotos</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	values<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
		value<span class="token operator">:</span> <span class="token string">&#39;./cat.png&#39;</span>
		<span class="token comment">// filename: &#39;cat.png&#39;,</span>
		<span class="token comment">// contentType: &#39;image/png&#39;</span>
		<span class="token comment">// contentLength: ...</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token comment">// timeout: 30_000,</span>
	<span class="token comment">// uploadUrl: &#39;...&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Удалён метод <code>context.getInviteLink()</code></li><li>Удалён метод <code>context.markAsImportant()</code></li><li>Удалён метод <code>context.renameChat()</code></li><li>Удалён метод <code>context.newChatPhoto()</code></li><li>Удалён метод <code>context.deleteChatPhoto()</code></li><li>Удалён метод <code>context.inviteUser()</code></li><li>Удалён метод <code>context.kickUser()</code></li><li>Удалён метод <code>context.pinMessage()</code></li><li>Удалён метод <code>context.unpinMessage()</code></li><li>Удалён метод <code>context.editMessageText()</code></li><li>Удалён метод <code>context.sendSticker()</code>, используйте <code>context.send({ sticker_id: 123 })</code></li></ul><h3 id="commentactioncontext" tabindex="-1"><a class="header-anchor" href="#commentactioncontext" aria-hidden="true">#</a> CommentActionContext</h3><ul><li>Переименован в <code>CommentContext</code></li></ul><h3 id="commentcontext" tabindex="-1"><a class="header-anchor" href="#commentcontext" aria-hidden="true">#</a> CommentContext</h3><ul><li>Удалён геттер <code>context.userId</code>, используйте <code>context.fromId</code></li><li>Удалён геттер <code>context.removerUserId</code>, используйте <code>context.deleterUserId</code></li></ul><h3 id="messageflagscontext" tabindex="-1"><a class="header-anchor" href="#messageflagscontext" aria-hidden="true">#</a> MessageFlagsContext</h3><ul><li>Переименован подтип <code>message_flags_update</code> в <code>message_flags_replace</code></li><li>Переименован подтип <code>message_flags_set</code> в <code>message_flags_add</code></li><li>Переименован геттер <code>context.isChat</code> в <code>context.isFromWebChat</code></li><li>Переименован геттер <code>context.isFriends</code> в <code>context.isFriendMessage</code></li><li>Переименован геттер <code>context.isSpam</code> в <code>context.isMarkSpam</code></li><li>Переименован геттер <code>context.isSpam</code> в <code>context.isUnmarkSpam</code></li><li>Удалён геттер <code>context.isFixed</code></li><li>Удалён геттер <code>context.isMedia</code></li></ul><h3 id="dialogflagscontext" tabindex="-1"><a class="header-anchor" href="#dialogflagscontext" aria-hidden="true">#</a> DialogFlagsContext</h3><ul><li>Переименован подтип <code>dialog_flags_update</code> в <code>dialog_flags_replace</code></li><li>Переименован подтип <code>dialog_flags_set</code> в <code>dialog_flags_add</code></li></ul><h3 id="removedmessagescontext" tabindex="-1"><a class="header-anchor" href="#removedmessagescontext" aria-hidden="true">#</a> RemovedMessagesContext</h3><ul><li>Переименован в <code>DialogMessagesContext</code></li></ul><h3 id="dialogmessagescontext" tabindex="-1"><a class="header-anchor" href="#dialogmessagescontext" aria-hidden="true">#</a> DialogMessagesContext</h3><ul><li>Переименован подтип <code>messages_delete</code> в <code>dialog_messages_delete</code></li><li>Переименован подтип <code>messages_restore</code> в <code>dialog_messages_restore</code></li><li>Переименован геттер <code>context.id</code> в <code>context.localId</code></li><li>Переименован геттер <code>context.isRemoved</code> в <code>context.isDelete</code></li><li>Переименован геттер <code>context.isRecovery</code> в <code>context.isRestore</code></li></ul><h3 id="useronlinecontext" tabindex="-1"><a class="header-anchor" href="#useronlinecontext" aria-hidden="true">#</a> UserOnlineContext</h3><ul><li>Переименован в <code>FriendActivityContext</code></li></ul><h3 id="friendactivitycontext" tabindex="-1"><a class="header-anchor" href="#friendactivitycontext" aria-hidden="true">#</a> FriendActivityContext</h3><ul><li>Переименован подтип <code>user_online</code> в <code>friend_online</code></li><li>Переименован подтип <code>user_offline</code> в <code>friend_offline</code></li><li>Переименован геттер <code>context.isUserOnline</code> в <code>context.isOnline</code></li><li>Переименован геттер <code>context.isUserOffline</code> в <code>context.isOffline</code></li><li>Переименован геттер <code>context.isSelfExit</code> в <code>context.isSelfLeave</code></li><li>Переименован геттер <code>context.isTimeoutExit</code> в <code>context.isTimeoutLeave</code></li><li>Переименован геттер <code>context.createdAt</code> в <code>context.eventAt</code></li><li>Геттер <code>context.platform</code> теперь возвращает ID платформы</li></ul><h3 id="readmessagescontext" tabindex="-1"><a class="header-anchor" href="#readmessagescontext" aria-hidden="true">#</a> ReadMessagesContext</h3><ul><li>Переименован в <code>MessagesReadContext</code></li></ul><h3 id="messagesreadcontext" tabindex="-1"><a class="header-anchor" href="#messagesreadcontext" aria-hidden="true">#</a> MessagesReadContext</h3><ul><li>Переименован подтип <code>messages_inbox_read</code> в <code>messages_read_inbox</code></li><li>Переименован подтип <code>messages_outbox_read</code> в <code>messages_read_outbox</code></li><li>Переименован геттер <code>context.id</code> в <code>context.localId</code></li></ul><h3 id="messageallowcontext" tabindex="-1"><a class="header-anchor" href="#messageallowcontext" aria-hidden="true">#</a> MessageAllowContext</h3><ul><li>Переименован в <code>MessageSubscriptionContext</code></li></ul><h3 id="messagesubscriptioncontext" tabindex="-1"><a class="header-anchor" href="#messagesubscriptioncontext" aria-hidden="true">#</a> MessageSubscriptionContext</h3><ul><li>Тип <code>message_subscribers</code> переименован в <code>message_subscription</code></li></ul><h3 id="keyboard" tabindex="-1"><a class="header-anchor" href="#keyboard" aria-hidden="true">#</a> Keyboard</h3><ul><li>Удалена константа <code>Keyboard.DEFAULT_COLOR</code>, используйте <code>Keyboard.SECONDARY_COLOR</code></li></ul><h3 id="updates" tabindex="-1"><a class="header-anchor" href="#updates" aria-hidden="true">#</a> Updates</h3><ul><li>Все контексты теперь используют <code>undefined</code> вместо <code>null</code> для удобной деструктуризации, например:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message_new&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> text <span class="token operator">=</span> <span class="token string">&#39;default text&#39;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>text <span class="token operator">===</span> <span class="token string">&#39;default text&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Вы ничего не написали&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">await</span> context<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Удалён метод <code>updates.hear()</code> и <code>updates.setHearFallbackHandler()</code>, используйте вместо этого пакет <a href="https://github.com/negezor/vk-io/tree/master/packages/hear" target="_blank" rel="noopener noreferrer">@vk-io/hear<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Теперь используются <a href="https://vk.com/dev/groups_events" target="_blank" rel="noopener noreferrer">официальные именования событий<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> Например</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;message_new&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">await</span> context<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Удален второй аргумент у <code>updates.startWebhook()</code>, вместо этого передавайте функцию в свойство <code>next</code></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>updates<span class="token punctuation">.</span><span class="token function">startWebhook</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// ...</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Версия polling&#39;а была обновлена до <code>10</code></li><li>Переименование опции <strong>pollingAttempts</strong> в <strong>pollingRetryLimit</strong></li></ul><h3 id="upload" tabindex="-1"><a class="header-anchor" href="#upload" aria-hidden="true">#</a> Upload</h3><ul><li>Методы <code>upload.storiesPhoto()</code> и <code>upload.storiesVideo()</code> теперь возвращают <code>StoryAttachment</code></li><li>Удалён метод <code>upload.graffiti()</code>, используйте вместо него <code>upload.documentGraffiti()</code> или <code>upload.messageGraffiti()</code></li><li>Изменился формат <code>source</code>, теперь он принимает только два интерфейса:</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>upload<span class="token punctuation">.</span><span class="token function">messagePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	source<span class="token operator">:</span> <span class="token punctuation">{</span>
		value<span class="token operator">:</span> <span class="token string">&#39;https://picsum.photos/200/300/?image=1&#39;</span><span class="token punctuation">,</span>

		<span class="token comment">// filename: &#39;image.jpeg&#39;,</span>
		<span class="token comment">// contentType: &#39;image/jpeg&#39;</span>

		<span class="token comment">// contentLength?: number;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Или</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>upload<span class="token punctuation">.</span><span class="token function">messagePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	source<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// uploadUrl?: string;</span>
		<span class="token comment">// timeout?: number;</span>
		
		<span class="token comment">// Свойство values может быть массивом если загрузка в альбом</span>
		values<span class="token operator">:</span> <span class="token punctuation">{</span>
			value<span class="token operator">:</span> <span class="token string">&#39;https://picsum.photos/200/300/?image=1&#39;</span><span class="token punctuation">,</span>

			<span class="token comment">// filename: &#39;image.jpeg&#39;,</span>
			<span class="token comment">// contentType: &#39;image/jpeg</span>

			<span class="token comment">// contentLength?: number;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>У элемента в <code>source</code> появилось свойство <code>contentLength</code>, позволяет указать размер загружаемого файла</li></ul><blockquote><p>Если вы используете поток, который не предоставляет информации о размере в байтах, вам следует указать свойство <code>contentLength</code>, так как иначе файл не будет загружен. Это особенно актуально для метода <code>upload.video()</code></p></blockquote><h3 id="callback-service" tabindex="-1"><a class="header-anchor" href="#callback-service" aria-hidden="true">#</a> Callback Service</h3><ul><li>Используйте метод <code>callbackService.onCaptcha()</code> вместо сеттера <code>callbackService.captchaHandler</code></li><li>Используйте метод <code>callbackService.onTwoFactor()</code> вместо сеттера <code>callbackService.twoFactorHandler</code></li></ul><h3 id="удаленные-экспорты" tabindex="-1"><a class="header-anchor" href="#удаленные-экспорты" aria-hidden="true">#</a> Удалённые экспорты</h3><ul><li>Удалён экспорт <code>attachmentTypes</code>, используйте <code>AttachmentType</code></li><li>Удалён экспорт <code>defaultExtensions</code>, используйте <code>DefaultExtension</code></li><li>Удалён экспорт <code>defaultContentTypes</code>, используйте <code>DefaultContentType</code></li><li>Удалён экспорт <code>captchaTypes</code>, используйте <code>CaptchaType</code></li><li>Удалён экспорт <code>messageSources</code>, используйте <code>MessageSource</code></li><li>Удалён экспорт <code>resourceTypes</code>, используйте <code>ResourceType</code></li><li>Удалён экспорт <code>updatesSources</code>, используйте <code>UpdateSource</code></li><li>Удалён экспорт <code>apiErrors</code>, используйте <code>APIErrorCode</code></li><li>Удалён экспорт <code>uploadErrors</code>, используйте <code>UploadErrorCode</code></li><li>Удалён экспорт <code>updatesErrors</code>, используйте <code>UpdatesErrorCode</code></li><li>Удалён экспорт <code>snippetsErrors</code>, используйте <code>ResourceErrorCode</code></li><li>Удалён экспорт <code>sharedErrors</code>, используйте <code>SharedErrorCode</code></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/negezor/vk-io/edit/main/ru/guide/migration-to-v4.md" rel="noopener noreferrer" target="_blank" aria-label="Редактировать"><!--[--><!--]--> Редактировать <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Последнее обновление: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vk-io/assets/app.4383cdfd.js" defer></script>
  </body>
</html>
